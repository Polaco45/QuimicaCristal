<odoo>
	<data>
		<record model="ir.ui.view" id="affiliate_visit_view_form">
			<field name="name">affiliate.visit.form</field>
			<field name="model">affiliate.visit</field>
			<field name="arch" type="xml">
				<form create='false'>
					<header >
						<field name="state" widget="statusbar" statusbar_visible="draft,cancel,confirm,invoice,paid"/>
						<button name="action_confirm"  string="Confirm" type="object"
							invisible="state == 'cancel' or state == 'confirm' or state == 'invoice' or state == 'paid'"
							groups="base.group_system,affiliate_management.affiliate_security_manager_group"/>
						<button name="action_cancel" type="object" string="Cancel"
								invisible="state == 'invoice' or state == 'paid' or state == 'cancel'"
								groups="base.group_system,affiliate_management.affiliate_security_manager_group"/>
					</header>
					<sheet>
						<div class="oe_button_box" name="button_box">
							<button class="oe_stat_button" type="object" name="show_affiliate_invoice" invisible="not act_invoice_id" icon="fa-book" string="Invoice" />
						</div>

						<field name="name" class="h1" readonly="1"/>

						<group>
							<group class="mt-4" string="Commission Details">
								<field name="affiliate_program_id" readonly="state != 'draft'" />
								<field name="affiliate_method" readonly="state != 'draft'" />
								<field name="affiliate_type" readonly="state != 'draft'" />
								<field name="commission_amt" readonly="state != 'draft'" />
								<field name="amt_type" string="Commission Matrix" readonly="state != 'draft'" />
								<field name="url" invisible="affiliate_method == 'pps'" readonly="state != 'draft'" groups="base.group_system,affiliate_management.affiliate_security_manager_group"/>
								<field name="ip_address" readonly="state != 'draft'" groups="base.group_system,affiliate_management.affiliate_security_manager_group"/>
								<field name="is_converted" readonly="state != 'draft'" invisible="affiliate_method == 'pps'"/>
								<field name="convert_date" string="Date" readonly="state != 'draft'" />
								<field name="affiliate_partner_id" readonly="state != 'draft'" />
								<field name="affiliate_key" readonly="state != 'draft'" />
								<field name="act_invoice_id" readonly="state != 'draft'" />
							</group>
							<group class="mt-4" string="Order Details">
								<field name="type_id" />
								<field name="type_name"/>
								<field name="sales_order_line_id" string="Order" invisible="affiliate_method == 'ppc'" />
								<field name="product_quantity" string="Product Quantity"  invisible="affiliate_method == 'ppc'" readonly="state != 'draft'" />
								<field name="unit_price"  invisible="affiliate_method == 'ppc'" readonly="state != 'draft'" />
								<field name="price_total"  invisible="affiliate_method == 'ppc'" readonly="state != 'draft'" />
								<field name="website_id" />
							</group>
						</group>
					</sheet>
					<chatter/>
				</form>
			</field>
		</record>

		<record model="ir.ui.view" id="affiliate_visit__view_tree">
			<field name="name">affiliate.visit.list</field>
			<field name="model">affiliate.visit</field>
			<field name="arch" type="xml">
				<list create="false">
					<field name="name"/>
					<field name="website_id" />
					<field name="affiliate_method" />
					<field name="is_converted" column_invisible="context.get('default_affiliate_method') == 'ppc'"/>
					<field name="affiliate_key" />
					<field name="affiliate_partner_id" />
					<field name="create_date" string="Date"/>
					<field name="commission_amt" />
					<field name="state" />


				</list>
			</field>
		</record>

		<record id="webkul_employees_view_search" model="ir.ui.view">
			<field name="name">affiliate.visit Search</field>
			<field name="model">affiliate.visit</field>
			<field name="arch" type="xml">
			<search string="Search Employees">
				<field name="commission_amt" />
				<field name="state" />
				<filter string="Not Invoiced" name="state" domain="[('state','!=','invoice')]"/>
				<group string="Group By">
					<filter string="Method" name="affiliate_method" domain="[]" context="{'group_by':'affiliate_method'}"/>
					<filter string="Type" name="affiliate_type" domain="[]" context="{'group_by':'affiliate_type'}"/>
					<filter string="Converted" name="is_converted" domain="[]" context="{'group_by':'is_converted'}"/>
					<filter string="Partner" name="affiliate_partner_id" domain="[]" context="{'group_by':'affiliate_partner_id'}"/>
				</group>
			</search>
			</field>
		</record>
	

		<record model="ir.actions.act_window" id="affiliate_pps_visit_action">
			<field name="name">Order Report</field>
			<field name="path">order-reports</field>
			<field name="res_model">affiliate.visit</field>
			<field name="view_mode">list,form</field>
			<field name="context">{"default_affiliate_method":'pps'}</field>
			<field name="domain">[('affiliate_method','=','pps')]</field>
		</record>



		<record model="ir.actions.act_window" id="affiliate_ppc_visit_action">
			<field name="name">Traffic Report</field>
			<field name="path">traffic-reports</field>
			<field name="res_model">affiliate.visit</field>
			<field name="view_mode">list,form</field>
			<field name="context">{"default_affiliate_method":'ppc'}</field>
			<field name="domain">[('affiliate_method','=','ppc')]</field>
		</record>

		<menuitem 
			name="Reports"
			id="affiliate_report_visit_menu"
			parent="affiliate_manager_menu_base_root"
			sequence='2'
		/>
		<menuitem 
			name="Order Report"
			id="affiliate_order_report_visit_menu"
			groups='affiliate_management.affiliate_security_user_group'
			parent="affiliate_report_visit_menu"
			action="affiliate_pps_visit_action"
		/>
		<menuitem 
			name="Traffic Report"
			id="affiliate_traffic_report_visit_menu"
			groups='affiliate_management.affiliate_security_user_group'
			parent="affiliate_report_visit_menu"
			action="affiliate_ppc_visit_action"
		/>
	</data>
</odoo>
